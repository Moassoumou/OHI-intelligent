<!DOCTYPE html><html lang="fr"><head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1">
<title>Diag Firebase</title>
<script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-auth-compat.js"></script>
<style>body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial;margin:40px} button{padding:10px 14px;margin-right:8px}</style>
</head><body>
<h1>Diagnostic Firebase Auth</h1>
<p id="status">Statut: inconnu</p>
<div>
  <input id="email" placeholder="email" type="email">
  <input id="pass" placeholder="mot de passe" type="password">
  <button id="signup">Créer compte</button>
  <button id="login">Se connecter</button>
  <button id="google">Google</button>
  <button id="logout">Déconnexion</button>
</div>
<script>
const firebaseConfig = {
  apiKey: "AIzaSyD4JaJelN4LbkbLfGVJVbCAY6gK9sPAN3I",
  authDomain: "tableau-de-bord-intelligent.firebaseapp.com",
  projectId: "tableau-de-bord-intelligent",
  storageBucket: "tableau-de-bord-intelligent.appspot.com",
  messagingSenderId: "226539421183",
  appId: "1:226539421183:web:7386e6a4274f1c9fde3bca",
  measurementId: "G-7K0EN05CJ7"
};
firebase.initializeApp(firebaseConfig);
const auth = firebase.auth();
auth.useDeviceLanguage();
auth.setPersistence(firebase.auth.Auth.Persistence.LOCAL);

const $ = s=>document.querySelector(s);
auth.onAuthStateChanged(u=>{
  $('#status').textContent = u ? `Connecté: ${u.email||u.uid}` : 'Déconnecté';
});

$('#signup').onclick = async()=>{
  try{ await auth.createUserWithEmailAndPassword($('#email').value, $('#pass').value); }catch(e){ alert(e.message); }
};
$('#login').onclick = async()=>{
  try{ await auth.signInWithEmailAndPassword($('#email').value, $('#pass').value); }catch(e){ alert(e.message); }
};
$('#google').onclick = async()=>{
  try{ await auth.signInWithPopup(new firebase.auth.GoogleAuthProvider()); }catch(e){ alert(e.message); }
};
$('#logout').onclick = ()=>auth.signOut();
</script>
</body></html>
